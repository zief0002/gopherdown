%% ------------------------------------------------------------------- %%
%% Preamble
%% ------------------------------------------------------------------- %%

\documentclass[11pt,english]{umnthesis}

% Better math support
\usepackage{mathptmx}  % Define Adobe Times Roman (or equivalent) as default text font, and provides math support
\renewcommand{\sfdefault}{lmss}  % Use Latin Modern slanted font (lmss) for math
\renewcommand{\ttdefault}{lmtt}  % Use Latin Modern typewriter text (lmtt) for math
\usepackage[T1]{fontenc}         % Select font encoding
\usepackage[utf8]{inputenc}      % Accept different input encodings

% Set margins
\usepackage{geometry}
\geometry{verbose,tmargin=1in,bmargin=1in,lmargin=1in,rmargin=1in}

% Define TOC counters
\setcounter{secnumdepth}{3}
\setcounter{tocdepth}{3}

\usepackage{color}     % More color options
\usepackage{babel}     % Multilingual support
\usepackage{graphicx}  % Better graphics support

% Support for setting the spacing between lines in a document
\usepackage{setspace}
\doublespacing

\usepackage{latexsym} % Add LaTeX symbols

% Better tables
\usepackage{longtable}
\usepackage{booktabs}
\usepackage{lmodern}

% Do not float figures/tables 
\usepackage{float}
\floatplacement{figure}{H}

\usepackage{rotating}   % For rotating figures/tables

% Support for hyperreferences/links
\usepackage{xurl}       % Allow URL breaks
\usepackage[unicode=true,
 bookmarks=true,bookmarksnumbered=false,bookmarksopen=false,
 breaklinks=true,pdfborder={0 0 0},pdfborderstyle={},backref=false,colorlinks=true]
 {hyperref}
\hypersetup{pdftitle={University of Minnesota Thesis Template},
 pdfauthor={Anonymous},
 pdfsubject={A Thesis},
 urlcolor={black},citecolor={black},allcolors={black}}


%%% Uncomment the following two lines to use the new biblatex-chicago style, for Chicago A. 
%%% Also make some changes at the end where the bibliography is included.
%\usepackage{biblatex-chicago}
%\bibliography{thesis}


% Use ref for internal links
\renewcommand{\hyperref}[2][???]{\autoref{#1}}
\def\chapterautorefname{Chapter}
\def\sectionautorefname{Section}
\def\subsectionautorefname{Subsection}

% Set up captioning
\usepackage{caption}
\captionsetup{width=5in}

\makeatletter

\usepackage{dcolumn} % Used to align decimal point in table columns


\@ifundefined{showcaptionsetup}{}{%
  \PassOptionsToPackage{caption=false}{subfig}}
\usepackage{subfig}
\makeatother

% Typeset source code listings
\usepackage{listings}
\renewcommand{\lstlistingname}{\inputencoding{latin9}Listing}


%% ------------------------------------------------------------------- %%
%% These additions are made to make the template play nice with pandoc
%% ------------------------------------------------------------------- %%

\providecommand{\tightlist}{%
  \setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}
\usepackage{fancyvrb}
\let\iint=\relax
\let\iiint=\relax
\let\iiiint=\relax
\let\idotsint=\relax
\usepackage{amsmath}
\DefineVerbatimEnvironment{Highlighting}{Verbatim}{commandchars=\\\{\}\linespread{1}\normalfont\ttfamily}
\usepackage{framed}
\definecolor{shadecolor}{RGB}{248,248,248}
\newenvironment{Shaded}{\begin{snugshade}}{\end{snugshade}}
\newcommand{\KeywordTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{\textbf{#1}}}
\newcommand{\DataTypeTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{#1}}
\newcommand{\DecValTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\BaseNTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\FloatTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\ConstantTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\CharTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\SpecialCharTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\StringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\VerbatimStringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\SpecialStringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\ImportTok}[1]{#1}
\newcommand{\CommentTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textit{#1}}}
\newcommand{\DocumentationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\AnnotationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\CommentVarTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\OtherTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{#1}}
\newcommand{\FunctionTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\VariableTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\ControlFlowTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{\textbf{#1}}}
\newcommand{\OperatorTok}[1]{\textcolor[rgb]{0.81,0.36,0.00}{\textbf{#1}}}
\newcommand{\BuiltInTok}[1]{#1}
\newcommand{\ExtensionTok}[1]{#1}
\newcommand{\PreprocessorTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textit{#1}}}
\newcommand{\AttributeTok}[1]{\textcolor[rgb]{0.77,0.63,0.00}{#1}}
\newcommand{\RegionMarkerTok}[1]{#1}
\newcommand{\InformationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\WarningTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\AlertTok}[1]{\textcolor[rgb]{0.94,0.16,0.16}{#1}}
\newcommand{\ErrorTok}[1]{\textcolor[rgb]{0.64,0.00,0.00}{\textbf{#1}}}
\newcommand{\NormalTok}[1]{#1}
\usepackage{float}


%% ------------------------------------------------------------------- %%
%% These additions are from {rticles} to make the references play nice with pandoc
%% ------------------------------------------------------------------- %%

$if(csl-refs)$
\newlength{\csllabelwidth}
\setlength{\csllabelwidth}{3em}
\newlength{\cslhangindent}
\setlength{\cslhangindent}{1.5em}

% for Pandoc 2.8 to 2.10.1
\newenvironment{cslreferences}%
  {$if(csl-hanging-indent)$\setlength{\parindent}{0pt}%
  \everypar{\setlength{\hangindent}{\cslhangindent}}\ignorespaces$endif$}%
  {\par}

% For Pandoc 2.11+
% As noted by @mirh [2] is needed instead of [3] for 2.12
\newenvironment{CSLReferences}[2] % #1 hanging-ident, #2 entry spacing
 {% don't indent paragraphs
  \setlength{\parindent}{0pt}
  % turn on hanging indent if param 1 is 1
  \ifodd #1 \everypar{\setlength{\hangindent}{\cslhangindent}}\ignorespaces\fi
  % set entry spacing
  \ifnum #2 > 0
  \setlength{\parskip}{#2\baselineskip}
  \fi
 }%
 {}
\usepackage{calc} % for calculating minipage widths
\newcommand{\CSLBlock}[1]{#1\hfill\break}
\newcommand{\CSLLeftMargin}[1]{\parbox[t]{\csllabelwidth}{#1}}
\newcommand{\CSLRightInline}[1]{\parbox[t]{\linewidth - \csllabelwidth}{#1}}
\newcommand{\CSLIndent}[1]{\hspace{\cslhangindent}#1}
$endif$


%% ------------------------------------------------------------------- %%
%% Define things from the YAML in the skeleton.RMD file
%% ------------------------------------------------------------------- %%

\title{$title$}
\author{$author$}
\month{$month$}
\year{$year$}
\advisor{$advisor$}

$if(coadvisor)$
  \coadvisor{$coadvisor$}
$endif$

%% ------------------------------------------------------------------- %%
%% Create the thesis
%% ------------------------------------------------------------------- %%

\begin{document}

$if(phd)$
\makesignaturepage % required
\maketitlepage % required
\makecopyrightpage % recommended, required if registering copyright
$elseif(plan_b)$
\makeplanbtitlepage % required
\makecopyrightpage % recommended, required if registering copyright
$else$
\makethesistitlepage % required
\makecopyrightpage % recommended, required if registering copyright
$endif$

\frontmatter
\pagestyle{empty} % this removes page numbers from the frontmatter

$if(acknowledgements)$
  \begin{acknowledgements}
    $acknowledgements$
  \end{acknowledgements}
$endif$

$if(dedication)$
  \begin{dedication}
    $dedication$
  \end{dedication}
$endif$

$if(abstract)$
  \begin{abstract}
    $abstract$
  \end{abstract}
$endif$



\makeatletter
\def\maxwidth{ %
  \ifdim\Gin@nat@width>\linewidth
    \linewidth
  \else
    \Gin@nat@width
  \fi
}
\makeatother

\renewcommand{\contentsname}{Table of Contents}

\setlength{\parskip}{0pt}

% % Added by CII
% $if(space_between_paragraphs)$
%   %\setlength{\parskip}{\baselineskip}
%   \usepackage[parfill]{parskip}
% $endif$

\providecommand{\tightlist}{%
  \setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}

\tableofcontents{}

$if(lot)$
  \cleardoublepage
  \addcontentsline{toc}{chapter}{List of Tables}
  \listoftables
$endif$


$if(lof)$
  \cleardoublepage
  \addcontentsline{toc}{chapter}{List of Figures} 
  \listoffigures
$endif$

\mainmatter % here the regular arabic numbering starts
\pagestyle{fancyplain} % turns page numbering back on

$body$

\end{document}
